# Troubleshooting Guide

## Browser Console Errors and Warnings

### "Unchecked runtime.lastError: The message port closed before a response was received"

**Status**: ✅ **Safe to Ignore** - This is NOT caused by your app code.

#### What is this error?

This error message appears in the browser console when browser extensions (like ad blockers, password managers, privacy tools, etc.) try to communicate with content scripts, but the communication fails because:

1. The page navigated or reloaded before the message was received
2. The extension's context became invalidated
3. The extension was disabled or updated while the page was open

#### Why is it safe to ignore?

- ✅ **Not from your code**: This error is generated by browser extensions, not your React/Next.js application
- ✅ **No functional impact**: It doesn't affect your app's functionality at all
- ✅ **Common occurrence**: This is a very common warning in modern web applications
- ✅ **Already suppressed**: The app automatically suppresses these errors in production

#### How to verify it's from extensions

1. **Test in incognito/private mode**: Open your app in a private browsing window where extensions are typically disabled. The error should disappear.

2. **Disable extensions**: Temporarily disable all browser extensions and reload the page. The error should stop appearing.

3. **Check the error source**: In browser DevTools, look at the error stack trace. It will typically reference extension-related code, not your app's code.

#### What the app does to handle this

The app includes error suppression in `src/app/layout.tsx` that:
- Filters out `window.error` events containing extension-related messages
- Suppresses `console.error` calls from browser extensions
- Still logs real errors from your app code normally

#### For end users

If users report seeing this error, you can confidently tell them:
- It's harmless and can be safely ignored
- It's caused by browser extensions, not the app
- It doesn't affect the app's functionality
- They can ignore it or disable problematic extensions if it's annoying

---

### Camera/Video Related Errors

#### "Error playing video: AbortError"

**Status**: ✅ **Fixed** - This was addressed in recent updates.

**What was the issue?**: Race conditions when multiple `play()` calls happened simultaneously.

**Solution**: The app now properly manages video playback with:
- Promise tracking to cancel previous play() calls
- Proper cleanup on component unmount
- Readiness checks before playing

If you still see this error, it's likely during intentional cleanup and can be safely ignored.

#### "Camera permission denied"

**Causes**:
- User denied camera permission
- Browser security settings
- Not using HTTPS (camera requires secure context)

**Solutions**:
- Ensure the app is served over HTTPS in production
- Check browser permissions in settings
- Clear browser cache and try again

---

### Audio Playback Errors

#### "Failed to play audio"

**Causes**:
- Browser autoplay policies blocking audio
- Audio files not found
- User interaction required before audio can play

**Solutions**:
- Audio only plays after user interaction (starting workout)
- Check that audio files exist in `/public/audio/`
- Verify browser allows audio playback

---

### Database Connection Errors

#### "Failed to connect to MongoDB"

**Causes**:
- `MONGODB_URI` environment variable not set
- MongoDB Atlas network access not configured
- Incorrect connection string

**Solutions**:
1. Verify `MONGODB_URI` is set in Vercel environment variables
2. Check MongoDB Atlas network access allows `0.0.0.0/0` (all IPs) or your Vercel IPs
3. Verify the connection string format is correct
4. Check MongoDB Atlas cluster is running

---

### Pose Detection Errors

#### "Pose detection not initializing"

**Causes**:
- MediaPipe models not loading from CDN
- Network connectivity issues
- Browser compatibility issues

**Solutions**:
- Check browser console for CDN loading errors
- Verify internet connection
- Try a different browser (Chrome/Edge recommended)
- Check if browser blocks third-party scripts

---

## Development vs Production Issues

### Issue only in development

- **Hot reload errors**: Normal in Next.js development, refresh the page
- **TypeScript errors**: Run `npm run type-check` to see detailed errors
- **Build warnings**: Check `npm run build` output

### Issue only in production

- **Environment variables**: Verify all required variables are set in Vercel
- **HTTPS**: Ensure production URL uses HTTPS
- **CORS**: Check API endpoints allow your production domain
- **MongoDB**: Verify production database connection

---

## Getting Help

If you encounter an error not covered here:

1. **Check the browser console** for detailed error messages
2. **Check the network tab** for failed API requests
3. **Check Vercel logs** for server-side errors
4. **Review recent changes** in git history
5. **Test in incognito mode** to rule out extensions
6. **Test in different browsers** to check compatibility

---

## Common Solutions Checklist

- [ ] Clear browser cache and cookies
- [ ] Test in incognito/private mode
- [ ] Disable browser extensions
- [ ] Check environment variables are set
- [ ] Verify HTTPS is enabled (production)
- [ ] Check browser console for detailed errors
- [ ] Verify MongoDB connection
- [ ] Check network connectivity
- [ ] Try a different browser
- [ ] Restart development server (`npm run dev`)

